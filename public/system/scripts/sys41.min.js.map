{"version":3,"file":"sys41.min.js","mappings":"uBAAIA,EACAC,EACAC,EACAC,E,kCCHJ,MAAMC,EACFC,YAAYC,EAASC,GACjBC,KAAKF,QAAUA,EACf,IAAIG,EAAKC,SAASC,cAAc,KAChC,MAAMC,EAAKN,EAAQO,SAEnB,GAAID,EACA,QAAQ,GACJ,MAAOA,EAAGE,MACNL,EAAGM,MAAMD,MAAQF,EAAGE,MACpB,MACJ,MAAOF,EAAGI,MACNP,EAAGQ,UAAUC,IAAI,SACjB,MACJ,MAAON,EAAGO,QACNV,EAAGQ,UAAUC,IAAI,WACjB,MACJ,MAAON,EAAGQ,QACNX,EAAGQ,UAAUC,IAAI,WAK7BT,EAAGY,UAAYf,EAAQgB,KACvBf,EAAWgB,YAAYd,GACvBD,KAAKC,GAAKA,CACd,CACAe,OAAOlB,GACH,IACIE,KAAKC,GAAGY,UAAYf,EAAQgB,IAGhC,CAFE,MAAOG,GACL,MAAM,IAAIC,MAAM,sCACpB,CACA,OAAOlB,IACX,CACAmB,SACInB,KAAKC,GAAGkB,QACZ,EAGW,MAAMC,EACjBvB,YAAYI,GACRD,KAAKC,GAAKA,CACd,CACAoB,YAAYvB,GACR,OAAO,IAAIF,EAAUE,EAASE,KAAKC,GACvC,CACAoB,YAAYP,GACR,OAAO,IAAIlB,EAAU,CAAEkB,KAAMA,GACjC,E,iCCjDJ,MAaA,EAbY,KAER,IAAIQ,EAAcC,OAAOC,UAAUC,KAAK,SAAU,GAClD,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACzBN,EAAYO,UAAYZ,IACpBU,EAAQL,EAAYQ,QAAUb,EAAEc,OAAOD,OAAM,EAEjDR,EAAYU,QAAUf,IAClBW,EAAO,+BAAiCX,EAAC,CAC7C,GACH,C,iCCLL,MAeA,EAfuB,MACnBpB,aAAY,KACRoC,EAAI,KACJC,EAAI,QACJpC,IAEAE,KAAKiC,KAAOA,EACZjC,KAAKkC,KAAOA,EACZlC,KAAKF,QAAUA,CACnB,CACAqC,OAEA,GCiBJ,EAhCA,cAAmB,EACftC,aAAY,KACRoC,EAAI,KACJC,EAAI,QACJpC,IAGA,OADAsC,MAAM,CAACH,OAAMC,OAAMpC,YACZE,IACX,CACAmC,OAEA,CACAE,SAEA,CACAC,aAEA,CACAC,SAEA,CACAC,aAEA,CACAC,YAEA,CACAC,aAEA,GCVJ,EAnBA,cAAkB,EACd7C,aAAY,KACRoC,EAAI,KACJC,IAGA,OADAE,MAAM,CAACH,OAAMC,SACNlC,IACX,CACAuC,SAEA,CACAF,SAEA,CACAC,aAEA,GCFJ,EAdA,cAAoB,EAChBzC,aAAY,KAACoC,IACT,GAAGA,EAAK,IAAM,iBAAoBA,EAE9B,MAAM,IAAIf,MAAM,2DAGpB,OADAkB,MAAM,CAACH,KAAMA,IACNjC,IACX,CACA2C,SAEA,GCYJ,EArBc,CACVtB,WAAgB,OAAC,KACbY,EAAI,KACJC,EAAI,QACJpC,KAEO,IAAI,EAAK,CAACmC,OAAMC,OAAMpC,YAEjCuB,UAAe,OAAC,KACZY,EAAI,KACJC,KAEO,IAAI,EAAI,CAACD,OAAMC,SAE1Bb,YAAiB,OAAC,KACdY,KAEO,IAAI,EAAM,CAACA,S,uECjB1B,MAAMW,EAAQ,CACVC,GAAI,IAKJC,UAAW,SACXC,MAAO,IAAI,IAAW7C,SAAS8C,uBAAuB,QAAQ,KAElEJ,EAAMG,MAAME,MAAM,CAACnC,KAAM,kCAAoCoC,UAAUC,UAAY,OAAS,IAAIC,OAChGR,EAAMG,MAAME,MAAM,CAACnC,KAAM,mBACzB,IACI8B,EAAME,UAAY,QAGtB,CAFE,MAAO7B,GACL2B,EAAMG,MAAME,MAAM,CAACnC,KAAM,qBAAsBN,OAAO,GAC1D,CACAoC,EAAMG,MAAME,MAAM,CAACnC,KAAM,cAAeH,SAAS,I,0BCnB7C0C,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CTtBIlE,EAAkC,mBAAXqE,OAAwBA,OAAO,kBAAoB,qBAC1EpE,EAAmC,mBAAXoE,OAAwBA,OAAO,mBAAqB,sBAC5EnE,EAAiC,mBAAXmE,OAAwBA,OAAO,iBAAmB,oBACxElE,EAAgBmE,IAChBA,IAAUA,EAAMC,IAClBD,EAAMC,EAAI,EACVD,EAAME,SAASC,GAAQA,EAAGC,MAC1BJ,EAAME,SAASC,GAAQA,EAAGC,IAAMD,EAAGC,IAAMD,MAC1C,EAyBDX,EAAoBa,EAAI,CAACR,EAAQS,EAAMC,KACtC,IAAIP,EACJO,KAAcP,EAAQ,IAAIC,EAAI,GAC9B,IAEIO,EACAC,EACA3C,EAJA4C,EAAY,IAAIC,IAChBf,EAAUC,EAAOD,QAIjBgB,EAAU,IAAIhD,SAAQ,CAACC,EAASgD,KACnC/C,EAAS+C,EACTJ,EAAe5C,CAAO,IAEvB+C,EAAQjF,GAAkBiE,EAC1BgB,EAAQlF,GAAkByE,IAAQH,GAASG,EAAGH,GAAQU,EAAUR,QAAQC,GAAKS,EAAe,OAAEE,SAC9FjB,EAAOD,QAAUgB,EACjBN,GAAMS,IAEL,IAAIZ,EADJK,EAvCa,CAACO,GAAUA,EAAKC,KAAKC,IACnC,GAAW,OAARA,GAA+B,iBAARA,EAAkB,CAC3C,GAAGA,EAAIvF,GAAgB,OAAOuF,EAC9B,GAAGA,EAAIC,KAAM,CACZ,IAAIlB,EAAQ,GACZA,EAAMC,EAAI,EACVgB,EAAIC,MAAMd,IACTe,EAAIxF,GAAkByE,EACtBvE,EAAamE,EAAM,IAChB7C,IACHgE,EAAIvF,GAAgBuB,EACpBtB,EAAamE,EAAM,IAEpB,IAAImB,EAAM,CAAC,EAEX,OADAA,EAAIzF,GAAkByE,GAAQA,EAAGH,GAC1BmB,CACR,CACD,CACA,IAAIC,EAAM,CAAC,EAGX,OAFAA,EAAI1F,GAAiBoF,MACrBM,EAAIzF,GAAkBsF,EACfG,CAAG,IAkBKC,CAASN,GAEvB,IAAIO,EAAY,IAAOd,EAAYQ,KAAKf,IACvC,GAAGA,EAAErE,GAAe,MAAMqE,EAAErE,GAC5B,OAAOqE,EAAEtE,EAAe,IAErBiF,EAAU,IAAIhD,SAASC,KAC1BsC,EAAK,IAAOtC,EAAQyD,IACjBlB,EAAI,EACP,IAAImB,EAAWC,GAAOA,IAAMxB,IAAUU,EAAUe,IAAID,KAAOd,EAAU9D,IAAI4E,GAAIA,IAAMA,EAAEvB,IAAME,EAAGC,IAAKoB,EAAEE,KAAKvB,KAC1GK,EAAYQ,KAAKC,GAASA,EAAIvF,GAAe6F,IAAU,IAExD,OAAOpB,EAAGC,EAAIQ,EAAUU,GAAW,IAChCK,IAAUA,EAAM7D,EAAO8C,EAAQhF,GAAgB+F,GAAOlB,EAAab,GAAW/D,EAAamE,MAC/FA,IAAUA,EAAMC,EAAI,EAAE,EU9DvBT,EAAoBS,EAAI,CAACL,EAASgC,KACjC,IAAI,IAAIC,KAAOD,EACXpC,EAAoBsC,EAAEF,EAAYC,KAASrC,EAAoBsC,EAAElC,EAASiC,IAC5EE,OAAOC,eAAepC,EAASiC,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDrC,EAAoBsC,EAAI,CAACX,EAAKgB,IAAUJ,OAAOK,UAAUC,eAAeC,KAAKnB,EAAKgB,GCGxD3C,EAAoB,I","sources":["webpack://open99/webpack/runtime/async module","webpack://open99/./src/boot/boot.js","webpack://open99/./src/boot/idb.js","webpack://open99/./src/fs/FileSystemItem.js","webpack://open99/./src/fs/File.js","webpack://open99/./src/fs/Dir.js","webpack://open99/./src/fs/Drive.js","webpack://open99/./src/fs/fs.js","webpack://open99/./src/index.js","webpack://open99/webpack/bootstrap","webpack://open99/webpack/runtime/define property getters","webpack://open99/webpack/runtime/hasOwnProperty shorthand","webpack://open99/webpack/startup"],"sourcesContent":["var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && !queue.d) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = 1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && (queue.d = 0);\n};","class BootEntry {\n    constructor(content, bootscreen) {\n        this.content = content\n        let el = document.createElement(\"p\")\n        const ft = content.features\n        //hacky but I don't want a bunch of if statements\n        if (ft) {\n            switch (true) {\n                case !!ft.color:\n                    el.style.color = ft.color\n                    break\n                case !!ft.error:\n                    el.classList.add(\"error\")\n                    break\n                case !!ft.success:\n                    el.classList.add(\"success\")\n                    break\n                case !!ft.warning:\n                    el.classList.add(\"warning\")\n                    break\n            }\n        }\n\n        el.innerHTML = content.text\n        bootscreen.appendChild(el)\n        this.el = el\n    }\n    update(content) {\n        try {\n            this.el.innerHTML = content.text\n        } catch (e) {\n            throw new Error(\"Could not change boot entry content\")\n        }\n        return this\n    }\n    remove() {\n        this.el.remove()\n    }\n}\n\nexport default class Bootscreen {\n    constructor(el) {\n        this.el = el\n    }\n    async write(content) {\n        return new BootEntry(content, this.el)\n    }\n    async error(text) {\n        return new BootEntry({ text: text })\n    }\n}","const idb = () => {\n\n    let openRequest = window.indexedDB.open(\"open99\", 1)\n    return new Promise((resolve, reject) => {\n        openRequest.onsuccess = e => {\n            resolve(openRequest.result || e.target.result)\n        }\n        openRequest.onerror = e => {\n            reject(\"Error attempting to open db:\" + e)\n        }\n    })\n}\n\nexport default idb","/**\n * creates an entry\n * @class\n * @classdesc file system item (should be extended)\n */\nconst FileSystemItem = class {\n    constructor({\n        name,\n        path,\n        content\n    }){\n        this.name = name\n        this.path = path\n        this.content = content\n    }\n    save(){\n        \n    }\n}\n\nexport default FileSystemItem","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass File extends FileSystemItem {\n    constructor({\n        name,\n        path,\n        content\n    }){\n        super({name, path, content})\n        return this\n    }\n    save(){\n        \n    }\n    delete(){\n\n    }\n    fullDelete(){\n        \n    }\n    rename(){\n\n    }\n    fullRename(){\n\n    }\n    changeExt(){\n\n    }\n    changeType(){\n\n    }\n}\n\nexport default File","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass Dir extends FileSystemItem {\n    constructor({\n        name,\n        path\n    }){\n        super({name, path})\n        return this\n    }\n    rename(){\n\n    }\n    delete(){\n\n    }\n    fullDelete(){\n\n    }\n}\n\nexport default Dir","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass Drive extends FileSystemItem {\n    constructor({name}){\n        if(name[1] || \"string\" === typeof name){\n            //name is a string, but only one char (drive letter)\n            throw new Error(\"Drive letter is not a string or is longer than one char\")\n        }\n        super({name: name})\n        return this\n    }\n    umount(){\n        \n    }\n}\n\nexport default Drive","import File from \"./File.js\"\nimport Dir from \"./Dir.js\"\nimport Drive from \"./Drive.js\"\n\nconst fsApi = {\n    async createFile({\n        name,\n        path,\n        content\n    }){\n        return new File({name, path, content})\n    },\n    async createDir({\n        name,\n        path\n    }){\n        return new Dir({name, path})\n    },\n    async createDrive({\n        name\n    }){\n        return new Drive({name})\n    }\n}\n\nexport default fsApi","import fsApi from \"./fs/fs.js\"\nimport idb from \"./boot/idb.js\"\nimport Bootscreen from \"./boot/boot.js\"\n\nconst sys41 = {\n    fs: fsApi,\n    /**\n     * the raw database\n     * @type {IDBDatabase}\n     */\n    _db: await idb(),\n    _boot: new Bootscreen(document.getElementsByClassName(\"boot\")[0])\n}\nsys41._boot.write({text: \"open99 BETA rewrite booting on \" + navigator.userAgent + \" at \" + new Date()})\nsys41._boot.write({text: \"Loading IDB...\"})\ntry {\n    sys41._db = await idb()\n} catch (e) {\n    sys41._boot.write({text: \"IDB failed to load\", error: true})\n}\nsys41._boot.write({text: \"IDB loaded!\", success: true})","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(817);\n"],"names":["webpackQueues","webpackExports","webpackError","resolveQueue","BootEntry","constructor","content","bootscreen","this","el","document","createElement","ft","features","color","style","error","classList","add","success","warning","innerHTML","text","appendChild","update","e","Error","remove","Bootscreen","async","openRequest","window","indexedDB","open","Promise","resolve","reject","onsuccess","result","target","onerror","name","path","save","super","delete","fullDelete","rename","fullRename","changeExt","changeType","umount","sys41","fs","_db","_boot","getElementsByClassName","write","navigator","userAgent","Date","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","Symbol","queue","d","forEach","fn","r","a","body","hasAwait","currentDeps","outerResolve","depQueues","Set","promise","rej","x","deps","map","dep","then","obj","ret","wrapDeps","getResult","fnQueue","q","has","push","err","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}