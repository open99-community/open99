{"version":3,"file":"sys41.min.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA,gBAAgB,yBAAyB,qEAAqE;AAC9G,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;;;;;;;;;;;;;;ACzDA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,iEAAe;;;;;;;;;;;;;;;AChBiC;;AAEhD,kBAAkB,0DAAc;AAChC;AACA;AACA;AACA,KAAK;AACL,eAAe,WAAW;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iEAAe;;;;;;;;;;;;;;;ACrBiC;;AAEhD,oBAAoB,0DAAc;AAClC;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA;AACA,iBAAiB,KAAK;AACtB;AACA;AACA;AACA,UAAU;AACV,mBAAmB,WAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe;;;;;;;;;;;;;;;ACtBiC;;AAEhD,mBAAmB,0DAAc;AACjC;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iEAAe;;;;;;;;;;;;;;AClCf;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe;;;;;;;;;;;;;;;;;ACtBa;AACF;AACI;;AAE9B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,mBAAmB,gDAAI,EAAE,oBAAoB;AAC7C,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,mBAAmB,+CAAG,EAAE,WAAW;AACnC,KAAK;AACL;AACA;AACA,KAAK;AACL,mBAAmB,iDAAK,EAAE,KAAK;AAC/B;AACA;;AAEA,iEAAe;;;;;;;;;;;;;;;ACzBe;AACC;AACQ;;AAEvC;AACA,eAAe,qDAAU;AACzB;;AAEA,mBAAmB,oFAAoF;AACvG,mBAAmB,uBAAuB;AAC1C;AACA,sBAAsB,wDAAG;AACzB,EAAE;AACF,uBAAuB,uCAAuC,0BAA0B;AACxF;AACA,mBAAmB,gCAAgC,eAAe;AAClE,mBAAmB,8BAA8B;AACjD,WAAW,iDAAK;AAChB,mBAAmB,uCAAuC,eAAe;;;;;;;;UClBzE;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA,sGAAsG;WACtG;WACA;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA,EAAE;WACF;WACA;;;;;WChEA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://open99/./src/boot/boot.js","webpack://open99/./src/boot/idb.js","webpack://open99/./src/fs/Dir.js","webpack://open99/./src/fs/Drive.js","webpack://open99/./src/fs/File.js","webpack://open99/./src/fs/FileSystemItem.js","webpack://open99/./src/fs/fs.js","webpack://open99/./src/index.js","webpack://open99/webpack/bootstrap","webpack://open99/webpack/runtime/async module","webpack://open99/webpack/runtime/define property getters","webpack://open99/webpack/runtime/hasOwnProperty shorthand","webpack://open99/webpack/runtime/make namespace object","webpack://open99/webpack/before-startup","webpack://open99/webpack/startup","webpack://open99/webpack/after-startup"],"sourcesContent":["class BootEntry {\n    /**\n     * \n     * @param {{text: string, features: {error: boolean, color: string, success: boolean, warning: boolean}}} content \n     * @param {HTMLElement} bootscreen The Bootscreen instance this BootEntry should be appended to\n     */\n    constructor(content, bootscreen) {\n        this.content = content\n        let el = document.createElement(\"p\")\n        const ft = content.features\n        //hacky but I don't want a bunch of if statements\n        if (ft) {\n            switch (true) {\n                case ft.color:\n                    el.style.color = ft.color\n                    break\n                case ft.error:\n                    el.classList.add(\"error\")\n                    break\n                case ft.success:\n                    el.classList.add(\"success\")\n                    break\n                case ft.warning:\n                    el.classList.add(\"warning\")\n                    break\n                case ft.blink:\n                    el.classList.add(\"blink\")\n            }\n        }\n\n        el.innerHTML = content.text\n        bootscreen.appendChild(el)\n        this.el = el\n    }\n    update(content) {\n        try {\n            this.el.innerHTML = content.text\n        } catch (e) {\n            throw new Error(\"Could not change boot entry content\")\n        }\n        return this\n    }\n    remove() {\n        this.el.remove()\n    }\n}\n\nexport default class Bootscreen {\n    constructor(el) {\n        this.el = el\n    }\n    async write(content) {\n        return new BootEntry(content, this.el)\n    }\n    async error(text) {\n        return new BootEntry({ text: text })\n    }\n}","/**\n * IDB\n * @returns {Promise<IDBDatabase> | Promise<Error>}\n */\nconst idb = () => {\n    let openRequest = window.indexedDB.open(\"open99\", 1)\n    return new Promise((resolve, reject) => {\n        openRequest.onsuccess = e => {\n            resolve(openRequest.result || e.target.result)\n        }\n        openRequest.onerror = e => {\n            reject(\"Error attempting to open db:\" + e)\n        }\n    })\n}\n\nexport default idb","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass Dir extends FileSystemItem {\n    constructor({\n        name,\n        path\n    }){\n        super({name, path})\n        return this\n    }\n    rename(){\n\n    }\n    delete(){\n\n    }\n    fullDelete(){\n\n    }\n}\n\nexport default Dir","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass Drive extends FileSystemItem {\n    /**\n     * \n     * @param {string} arg \n     * @param {string} arg.name\n     * @returns \n     */\n    constructor({name}){\n        if((name[1]) || (\"string\" !== typeof name)){\n            //name should be a string, but only one char (drive letter)\n            throw new Error(\"Drive letter is not a string or is longer than one char\")\n        } else {\n            super({path: name})\n        }\n    }\n    umount(){\n        \n    }\n}\n\nexport default Drive","import FileSystemItem from \"./FileSystemItem.js\"\n\nclass File extends FileSystemItem {\n    constructor({\n        name,\n        path,\n        content\n    }){\n        super({name, path, content})\n        return this\n    }\n    save(){\n        \n    }\n    delete(){\n\n    }\n    fullDelete(){\n        \n    }\n    rename(){\n\n    }\n    fullRename(){\n\n    }\n    changeExt(){\n\n    }\n    changeType(){\n\n    }\n}\n\nexport default File","/**\n * file system item (should be extended)\n */\nconst FileSystemItem = class {\n    /**\n     * creates an entry in the idb\n     * @param {Object} arg\n     * @param {string} arg.path Path to item\n     * @param {*} arg.content Item content\n     */\n    constructor({\n        path,\n        content\n    }){\n        this.path = path\n        this.content = content\n    }\n    save(){\n        \n    }\n}\n\nexport default FileSystemItem","import File from \"./File.js\"\nimport Dir from \"./Dir.js\"\nimport Drive from \"./Drive.js\"\n\nconst fsApi = {\n    async createFile({\n        name,\n        path,\n        content\n    }){\n        return new File({name, path, content})\n    },\n    async createDir({\n        name,\n        path\n    }){\n        return new Dir({name, path})\n    },\n    async createDrive({\n        name\n    }){\n        return new Drive({name})\n    }\n}\n\nexport default fsApi","import fsApi from \"./fs/fs.js\"\nimport idb from \"./boot/idb.js\"\nimport Bootscreen from \"./boot/boot.js\"\n\nconst sys41 = {\n    _boot: new Bootscreen(document.getElementsByClassName(\"boot\")[0])\n}\n\nsys41._boot.write({text: \"open99 BETA rewrite booting on \" + navigator.userAgent + \" at \" + new Date()})\nsys41._boot.write({text: \"Loading IDB...\"})\ntry {\n    sys41._db = await idb()\n} catch (e) {\n    sys41._boot.write({text: \"IDB failed to load\", features: {error: true, blink: true}})\n}\nsys41._boot.write({text: \"IDB loaded!\", features: {success: true}})\nsys41._boot.write({text: \"Loading FileSystem...\"})\nsys41.fs = fsApi\nsys41._boot.write({text: \"Filesystem loaded!\", features: {success: true}})","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && !queue.d) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = 1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.js\");\n",""],"names":[],"sourceRoot":""}